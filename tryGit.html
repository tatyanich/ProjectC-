
<!-- saved from url=(0068)http://asmodeus.com.ua/library/programing/git/git_for_beginners.html -->
<html lang="ru-RU" dir="ltr" xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
 

<title>Работа с git для начинающих</title>

<style type="text/css"></style><script src="blob:http%3A//asmodeus.com.ua/830151af-dc23-4d7f-a840-405bc5c477d2"></script><script src="blob:http%3A//asmodeus.com.ua/b301716f-abd6-466f-b893-79772f4bd938" charset="UTF-8"></script></head>
<body>


						<h1>Работа с git для начинающих</h1>
						
						<p>Наверное не все знают, что такое git и с чем его едят.<br>
git – это распределенная система контроля версий. Основные ее преимущества, лично для меня, распределенность и использование бинарных дифов, что упрощает работу с системой нескольких пользователей одновременно, и упрощает хранение бинарных файлов, ресурсов.</p>
<p>git используется во многих крупных проектах: Linux kernel, KDE и многих &nbsp;других.</p>
<p>Изначально git написал Linus Torvalds.</p>
<p><span id="more-123"></span></p>
<h2>Создание нового репозитория</h2>
<p>Создание нового репозитория – это наверное первая из задач, с которой сталкивается любой разработчик. К данной проблеме есть несколько подходов.</p>
<p>Во-первых, можно использовать только локальный репозиторий, но смысла особого я в этом не вижу.</p>
<p>Во-вторых, можно создать открытый репозиторий, с которым смогут работать другие люди. Рассмотрим этот вариант. Предположим, что у вас есть некий сервер <em>example.com</em> и ваша рабочая машинка.</p>
<p>Для начала вам необходимо установить git. Сделать это можно как вручную скомпилировав его из исходных кодов, так и установив с помощью менеджера пакетов. Будем считать что с этой операцией вы уже справились.</p>
<p>Далее вам надо создать репозиторий. Предположим что вы будете хранить все git-репозитории в /var/git:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash"><span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>git
<span style="color: #c20cb9; font-weight: bold;">mkdir</span> example.git
<span style="color: #7a0874; font-weight: bold;">cd</span> example.git
git init <span style="color: #660033;">--bare</span></pre></div></div>

<p>Теперь у вас есть пустой git-репозиторий. Это, собственно говоря, все команды, которые требуется выполнить на сервере.</p>
<p>Теперь идем на вашу рабочую машину и пишем:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git init
git remote add origin <span style="color: #c20cb9; font-weight: bold;">ssh</span>:<span style="color: #000000; font-weight: bold;">//</span>username<span style="color: #000000; font-weight: bold;">@</span>example.com<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>git<span style="color: #000000; font-weight: bold;">/</span>example.git
<span style="color: #c20cb9; font-weight: bold;">touch</span> changelog
git add changelog
git commit <span style="color: #660033;">-a</span> <span style="color: #660033;">-m</span><span style="color: #ff0000;">"Initital commit"</span>
git push origin master</pre></div></div>

<p>Этими командами мы создали новый репозиторий, связали его с основной веткой example.git, закомитили туда файл changelog и отослали это на сервер. В результате выполнения этих команд, вы должны увидеть чтото примерно такое:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">Counting objects: <span style="color: #000000;">3</span>, done.
Writing objects: <span style="color: #000000;">100</span><span style="color: #000000; font-weight: bold;">%</span> <span style="color: #7a0874; font-weight: bold;">(</span><span style="color: #000000;">3</span><span style="color: #000000; font-weight: bold;">/</span><span style="color: #000000;">3</span><span style="color: #7a0874; font-weight: bold;">)</span>, <span style="color: #000000;">224</span> bytes, done.
Total <span style="color: #000000;">3</span> <span style="color: #7a0874; font-weight: bold;">(</span>delta <span style="color: #000000;">0</span><span style="color: #7a0874; font-weight: bold;">)</span>, reused <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">(</span>delta <span style="color: #000000;">0</span><span style="color: #7a0874; font-weight: bold;">)</span>
To <span style="color: #c20cb9; font-weight: bold;">ssh</span>:<span style="color: #000000; font-weight: bold;">//</span>username<span style="color: #000000; font-weight: bold;">@</span>example.git<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>git<span style="color: #000000; font-weight: bold;">/</span>example.git
 <span style="color: #000000; font-weight: bold;">*</span> <span style="color: #7a0874; font-weight: bold;">[</span>new branch<span style="color: #7a0874; font-weight: bold;">]</span>      master -<span style="color: #000000; font-weight: bold;">&amp;</span>gt; master</pre></div></div>

<h2>Получение и оправка репозитория</h2>
<p>Разумеется, после создания репозитория разумно узнать “а как же получить эти данные на свой компьютер?”.</p>
<p>Для данной операции используется команда clone. Она создает полную копию удаленного репозитория у вас. Под полной копией понимается именно полная копия, со всеми ветками, удаленными файлами и т.д.</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git clone <span style="color: #c20cb9; font-weight: bold;">ssh</span>:<span style="color: #000000; font-weight: bold;">//</span>username<span style="color: #000000; font-weight: bold;">@</span>example.com<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>git<span style="color: #000000; font-weight: bold;">/</span>имя-репозитория</pre></div></div>

<p>Разумеется, /var/git может меняться, в зависимости от того, где располагаются файлы данного репозитория на удаленной машине.</p>
<h2>Обновление данных</h2>
<p>С таким локальным репозиторием можно работать долгое время, однако, когда-то у вас все же возникнет необходимость передать сделанные вами изменения в удаленный репозиторий, чтобы результатами вашего труда могли воспользоваться другие участники разработки, и получить из удаленного репозитория новую версию. Для этого служат команды pull и&nbsp; push.</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git pull</pre></div></div>

<p>Данная команда получает обновленную версию из удаленного репозитория, при этом она проверяет на наличие различных проблем при объединении репозиториев и сообщает об этом.</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git push</pre></div></div>

<p>Данная команда целиком передает все сделанные вами изменения, уже закомиченные в локальный репозиторий, в удаленный репозиторий. Для передачи тегов необходимо использовать аргумент –tags</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git push <span style="color: #660033;">--tags</span></pre></div></div>

<h2>Базовые операции</h2>
<p>Для базовой работы с любой системой контроля версий требуется не особенно большой набор операций: добавление файла в репозиторий, удаление файла из репозитория, комит изменений в репозиторий, отмена незакомиченных изменений и получение списка изменений.</p>
<p>Добавление списка файлов в комит:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">&nbsp;git add file1 file2 ... fileN</pre></div></div>

<p>Добавление всех недобавленных файлов в комит:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git add <span style="color: #660033;">-a</span></pre></div></div>

<p>Удаление файла из комита:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">&nbsp;git <span style="color: #c20cb9; font-weight: bold;">rm</span> file1 file2 ... fileN</pre></div></div>

<p>Удаление файла из комита и с жесткого диска:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git <span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> file1 file2 ... fileN</pre></div></div>

<p>Комит в локальный репозиторий (надо отметить, что в таком случае закомитятся только файлы, которые были обработаны с помощью git add/rm):</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git commit</pre></div></div>

<p>Комит всех изменений в локальный репозиторий:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git commit <span style="color: #660033;">-a</span></pre></div></div>

<p>Отмена всех изменений, сделанных в дереве, до состояния, которое было при последнем комите в локальный репозиторий( очень опасная команда, подумайте прежде чем пользоваться ею):</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git reset <span style="color: #660033;">--hard</span></pre></div></div>

<p>Создание дифа относительно последнего комита:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git <span style="color: #c20cb9; font-weight: bold;">diff</span></pre></div></div>

<h2>Использование веток</h2>
<p>Рано или поздно в любом проекте возникает ситуация, когда требуется заморозить изменения, но продолжать работать, а на замороженные изменения накладывать только баг-фиксы. Для этой цели служат ветви (branch)</p>
<p>В гите можно создать ветку от любого места. Для создания ветки от основного дерева надо выполнить следующую команду:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git checkout <span style="color: #660033;">--track</span> <span style="color: #660033;">-b</span> name_of_newbranch origin<span style="color: #000000; font-weight: bold;">/</span>master</pre></div></div>

<p>В результате этой команды вы увидите примерно такое сообщение:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">Branch name_of_newbranch <span style="color: #000000; font-weight: bold;">set</span> up to track remote branch refs<span style="color: #000000; font-weight: bold;">/</span>remotes<span style="color: #000000; font-weight: bold;">/</span>origin<span style="color: #000000; font-weight: bold;">/</span>master.
Switched to a new branch <span style="color: #ff0000;">"name_of_newbranch"</span></pre></div></div>

<p>Это значит, что в локальном репозитории у вас создалась новая ветка.</p>
<p>Если в этой команде заменить&nbsp;<em>origin/master</em> на <em>origin/remote_branch_name</em> то вы создадите ветку от другой ветки.</p>
<p>Чтобы ваша ветка была видна всем, ее требуется пропихнуть в удаленный репозиторий. Делается это так:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git push origin local_branch_name:remote_branch_name</pre></div></div>

<p>Разумеется, надо также уметь и получать ветки в свое распоряжение:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git branch local_branch_name origin<span style="color: #000000; font-weight: bold;">/</span>remote_branch_name
git checkout local_branch_name</pre></div></div>

<p>В результате вы получите искомую ветку после следующего сообщения:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">Switched to branch <span style="color: #ff0000;">"local_branch_name"</span></pre></div></div>

<h2>Работа с тегами</h2>
<p>Как правило, кроме веток разработчики используют теги – чтобы запомнить состояние кода в какой-то момент. Тег – это своеобразный слепок, точно идентифицирующий состояние кода. Гит умеет работать с подписанными GPG тегами и с неподписанными. Здесь я рассмотрю только неподписанные теги.</p>
<p>Для создания такого тега необходимо выполнить команду:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git tag</pre></div></div>

<p>Чтобы убрать тег необходимо &nbsp;выполнить:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git tag <span style="color: #660033;">-d</span></pre></div></div>

<p>Для того, чтобы тег стал виден всем, необходимо отправить его в удаленный репозиторий:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git push <span style="color: #660033;">--tags</span></pre></div></div>

<p>Чтобы получить версию с конкретного тега необходимо создать от него локальную ветку и расчекаутить эту ветку:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git fetch origin tag 
git branch  
git checkout</pre></div></div>

<p>Разумеется, в будущем эту ветку можно будет сделать глобальной и выслать в удаленной репозиторий.</p>
<h2>Настройка git</h2>
<p>Для ускорения некоторых операций и увеличения удобства работы можно провести пару настроек:</p>
<p>Настройка цветного вывода:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git config <span style="color: #660033;">--global</span> color.ui <span style="color: #ff0000;">"auto"</span></pre></div></div>

<p>Настройка имени пользователя и почтового адреса (между прочим, это хороший тон):</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git config user.name <span style="color: #ff0000;">"FirstName LastName"</span>
git config user.email <span style="color: #ff0000;">"user@example.com"</span></pre></div></div>

<p>Ускоряем дифы и отменяем ограничение на количество потоков упаковки при push:</p>

<div class="wp_syntax"><div class="code"><pre style="font-family:monospace;" class="bash">git config <span style="color: #660033;">--global</span> diff.renamelimit <span style="color: #ff0000;">"0"</span>
git config <span style="color: #660033;">--global</span> pack.threads <span style="color: #ff0000;">"0"</span></pre></div></div>

<h2>Вместо заключения</h2>
<p>Git – &nbsp;очень мощная и удобная система контроля версий. Для нее существует несколько GUI утилит, которые могут облегчить работу, несколько веб интерфейсов для мониторинга текущего состояния. В последнее время все большее кол-во проектов переходят на использование git, и это показатель того, что git успешно развивается и соответствует последним требованиям в области систем контроля версий.</p>
<p>Большое кол-во &nbsp;документации по использованию git можно найти в сети, в том числе и на <a target="_top" href="http://git-scm.com/">официальном сайте</a></p>
					
<a href="http://blog.nsws.ru/rabota-s-git-dlya-nachinayushhix.html">Источник статьи</a>
				

</body></html>